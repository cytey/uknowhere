import{S as be,i as me,s as ve,k,a as z,q as N,l as y,m as D,h as u,c as F,r as P,n as i,b as B,D as d,L as $,M as ee,N as ke,u as W,B as X,O as te,P as ye,E as we,o as Ee,Q as J,R as De,e as Y,T as ce}from"../../../chunks/index-d1dd279f.js";import{c as q}from"../../../chunks/singletons-d323719f.js";import{d as H}from"../../../chunks/data-7bd98c1e.js";q.disable_scroll_handling;q.goto;q.invalidate;const pe=q.invalidateAll;q.prefetch;q.prefetch_routes;q.before_navigate;q.after_navigate;const ge=q.apply_action;function Ae(n,t=()=>{}){const s=async({action:e,result:l})=>{l.type==="success"&&(n.reset(),await pe()),(location.origin+location.pathname===e.origin+e.pathname||l.type==="redirect"||l.type==="error")&&ge(l)};async function r(e){var j,E,K,U,p;e.preventDefault();const l=new URL((j=e.submitter)!=null&&j.hasAttribute("formaction")?e.submitter.formAction:n.action),a=new FormData(n),o=(E=e.submitter)==null?void 0:E.getAttribute("name");o&&a.append(o,(U=(K=e.submitter)==null?void 0:K.getAttribute("value"))!=null?U:"");const w=new AbortController;let h=!1;const R=(p=t({action:l,cancel:()=>h=!0,controller:w,data:a,form:n}))!=null?p:s;if(h)return;let O;try{O=await(await fetch(l,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},body:a,signal:w.signal})).json()}catch(S){if((S==null?void 0:S.name)==="AbortError")return;O={type:"error",error:S}}R({action:l,data:a,form:n,update:()=>s({action:l,result:O}),result:O,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return n.addEventListener("submit",r),{destroy(){n.removeEventListener("submit",r)}}}function ie(n,t,s){const r=n.slice();return r[18]=t[s],r}function ue(n,t,s){const r=n.slice();return r[21]=t[s],r}function fe(n,t,s){const r=n.slice();return r[21]=t[s],r[25]=s,r}function Te(n){let t,s,r,e;return{c(){t=k("div"),s=N("Drag and Drop the marker to a location "),r=k("br"),e=N(" with nearby places to play"),this.h()},l(l){t=y(l,"DIV",{class:!0});var a=D(t);s=P(a,"Drag and Drop the marker to a location "),r=y(a,"BR",{}),e=P(a," with nearby places to play"),a.forEach(u),this.h()},h(){i(t,"class","bg-white inline-block p-2 px-4 google-map-box-shadow svelte-lfg4wc")},m(l,a){B(l,t,a),d(t,s),d(t,r),d(t,e)},p:X,d(l){l&&u(t)}}}function Se(n){let t,s=n[3][n[2]].toString().split(""),r=[];for(let e=0;e<s.length;e+=1)r[e]=de(fe(n,s,e));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=Y()},l(e){for(let l=0;l<r.length;l+=1)r[l].l(e);t=Y()},m(e,l){for(let a=0;a<r.length;a+=1)r[a].m(e,l);B(e,t,l)},p(e,l){if(l&525){s=e[3][e[2]].toString().split("");let a;for(a=0;a<s.length;a+=1){const o=fe(e,s,a);r[a]?r[a].p(o,l):(r[a]=de(o),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}},d(e){te(r,e),e&&u(t)}}}function Oe(n){let t,s;return{c(){t=k("kbd"),s=N("A"),this.h()},l(r){t=y(r,"KBD",{class:!0});var e=D(t);s=P(e,"A"),e.forEach(u),this.h()},h(){i(t,"class","kbd invisible svelte-lfg4wc")},m(r,e){B(r,t,e),d(t,s)},p:X,d(r){r&&u(t)}}}function Be(n){let t,s=n[0][n[25]]+"",r;return{c(){t=k("kbd"),r=N(s),this.h()},l(e){t=y(e,"KBD",{class:!0});var l=D(t);r=P(l,s),l.forEach(u),this.h()},h(){i(t,"class","kbd bg-white svelte-lfg4wc")},m(e,l){B(e,t,l),d(t,r)},p(e,l){l&1&&s!==(s=e[0][e[25]]+"")&&W(r,s)},d(e){e&&u(t)}}}function Ie(n){let t,s=n[21]+"",r;return{c(){t=k("kbd"),r=N(s),this.h()},l(e){t=y(e,"KBD",{class:!0});var l=D(t);r=P(l,s),l.forEach(u),this.h()},h(){i(t,"class","kbd bg-success-content text-white svelte-lfg4wc")},m(e,l){B(e,t,l),d(t,r)},p(e,l){l&12&&s!==(s=e[21]+"")&&W(r,s)},d(e){e&&u(t)}}}function de(n){let t,s;function r(a,o){return o&12&&(t=null),t==null&&(t=!!a[9].includes(a[21])),t?Ie:a[21]!==" "?Be:Oe}let e=r(n,-1),l=e(n);return{c(){l.c(),s=Y()},l(a){l.l(a),s=Y()},m(a,o){l.m(a,o),B(a,s,o)},p(a,o){e===(e=r(a,o))&&l?l.p(a,o):(l.d(1),l=e(a),l&&(l.c(),l.m(s.parentNode,s)))},d(a){l.d(a),a&&u(s)}}}function he(n){let t,s,r,e,l;return{c(){t=k("button"),s=N(n[21]),this.h()},l(a){t=y(a,"BUTTON",{"data-key":!0,class:!0,formaction:!0,name:!0});var o=D(t);s=P(o,n[21]),o.forEach(u),this.h()},h(){i(t,"data-key",n[21]),i(t,"class",r=ce(n[1][n[21]])+" svelte-lfg4wc"),i(t,"formaction","?/update"),i(t,"name","key"),t.value=n[21]},m(a,o){B(a,t,o),d(t,s),e||(l=$(t,"click",ee(n[7])),e=!0)},p(a,o){o&2&&r!==(r=ce(a[1][a[21]])+" svelte-lfg4wc")&&i(t,"class",r)},d(a){a&&u(t),e=!1,l()}}}function _e(n){let t,s,r=n[18],e=[];for(let l=0;l<r.length;l+=1)e[l]=he(ue(n,r,l));return{c(){t=k("div");for(let l=0;l<e.length;l+=1)e[l].c();s=z(),this.h()},l(l){t=y(l,"DIV",{class:!0});var a=D(t);for(let o=0;o<e.length;o+=1)e[o].l(a);s=F(a),a.forEach(u),this.h()},h(){i(t,"class","row svelte-lfg4wc")},m(l,a){B(l,t,a);for(let o=0;o<e.length;o+=1)e[o].m(t,null);d(t,s)},p(l,a){if(a&130){r=l[18];let o;for(o=0;o<r.length;o+=1){const w=ue(l,r,o);e[o]?e[o].p(w,a):(e[o]=he(w),e[o].c(),e[o].m(t,s))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},d(l){l&&u(t),te(e,l)}}}function Le(n){let t,s,r,e,l,a,o,w,h,_,R,O,j,E,K,U,p,S,G,f,b,m,M,I;function V(c,v){return c[3]&&c[3].length&&c[0].length?Se:Te}let C=V(n),T=C(n),Z=["<qwertyuiop>","asdfghjkl","zxcvbnm"],A=[];for(let c=0;c<3;c+=1)A[c]=_e(ie(n,Z,c));return{c(){t=k("div"),s=k("div"),r=z(),e=k("div"),l=k("div"),T.c(),a=z(),o=k("form"),w=k("div"),h=k("div"),_=k("button"),R=N("enter"),j=z(),E=k("button"),K=N("back"),U=z(),p=k("button"),S=N(n[4]),G=z(),f=k("button"),b=N(n[5]),m=z();for(let c=0;c<3;c+=1)A[c].c();this.h()},l(c){t=y(c,"DIV",{class:!0});var v=D(t);s=y(v,"DIV",{id:!0,class:!0}),D(s).forEach(u),r=F(v),e=y(v,"DIV",{class:!0});var g=D(e);l=y(g,"DIV",{id:!0,class:!0});var Q=D(l);T.l(Q),Q.forEach(u),g.forEach(u),v.forEach(u),a=F(c),o=y(c,"FORM",{method:!0,action:!0,class:!0});var le=D(o);w=y(le,"DIV",{class:!0});var se=D(w);h=y(se,"DIV",{class:!0});var L=D(h);_=y(L,"BUTTON",{"data-key":!0,"aria-selected":!0,class:!0});var ae=D(_);R=P(ae,"enter"),ae.forEach(u),j=F(L),E=y(L,"BUTTON",{"data-key":!0,formaction:!0,name:!0,class:!0});var re=D(E);K=P(re,"back"),re.forEach(u),U=F(L),p=y(L,"BUTTON",{"data-key":!0,class:!0});var oe=D(p);S=P(oe,n[4]),oe.forEach(u),G=F(L),f=y(L,"BUTTON",{"data-key":!0,class:!0});var ne=D(f);b=P(ne,n[5]),ne.forEach(u),m=F(L);for(let x=0;x<3;x+=1)A[x].l(L);L.forEach(u),se.forEach(u),le.forEach(u),this.h()},h(){i(s,"id","map"),i(s,"class","svelte-lfg4wc"),i(l,"id","map-info"),i(l,"class","text-center my-1 w-full svelte-lfg4wc"),i(e,"class","hero-overlay bg-opacity-60"),i(t,"class","hero svelte-lfg4wc"),i(_,"data-key","enter"),i(_,"aria-selected",n[6]),_.disabled=O=!n[6],i(_,"class","svelte-lfg4wc"),i(E,"data-key","backspace"),i(E,"formaction","?/update"),i(E,"name","key"),E.value="backspace",i(E,"class","svelte-lfg4wc"),i(p,"data-key","tries"),p.disabled=!0,i(p,"class","svelte-lfg4wc"),i(f,"data-key","score"),f.disabled=!0,i(f,"class","svelte-lfg4wc"),i(h,"class","keyboard svelte-lfg4wc"),i(w,"class","controls svelte-lfg4wc"),i(o,"method","POST"),i(o,"action","?/enter"),i(o,"class","svelte-lfg4wc")},m(c,v){B(c,t,v),d(t,s),d(t,r),d(t,e),d(e,l),T.m(l,null),B(c,a,v),B(c,o,v),d(o,w),d(w,h),d(h,_),d(_,R),d(h,j),d(h,E),d(E,K),d(h,U),d(h,p),d(p,S),d(h,G),d(h,f),d(f,b),d(h,m);for(let g=0;g<3;g+=1)A[g].m(h,null);M||(I=[$(_,"click",ee(n[8])),$(E,"click",ee(n[7])),ke(Ae.call(null,o,n[10]))],M=!0)},p(c,[v]){if(C===(C=V(c))&&T?T.p(c,v):(T.d(1),T=C(c),T&&(T.c(),T.m(l,null))),v&64&&i(_,"aria-selected",c[6]),v&64&&O!==(O=!c[6])&&(_.disabled=O),v&16&&W(S,c[4]),v&32&&W(b,c[5]),v&130){Z=["<qwertyuiop>","asdfghjkl","zxcvbnm"];let g;for(g=0;g<3;g+=1){const Q=ie(c,Z,g);A[g]?A[g].p(Q,v):(A[g]=_e(Q),A[g].c(),A[g].m(h,null))}for(;g<3;g+=1)A[g].d(1)}},i:X,o:X,d(c){c&&u(t),T.d(),c&&u(a),c&&u(o),te(A,c),M=!1,ye(I)}}}function Ne(n,t,s){let r,e,l,a,o,w,h,_;we(n,H,f=>s(14,_=f));let R;function O(f){let b=l;const m=f.target.getAttribute("data-key");m==="backspace"?o>0&&(o--,b[a[o]]="_"):a[o]<b.length&&(b[a[o]]=m.toUpperCase(),o++),s(0,l=b)}function j(f){l.join("")===e[p].toUpperCase()?(s(5,w++,w),p<e.length-1?(s(2,p++,p),E()):console.log("gameover")):s(4,h++,h)}Ee(()=>{J(H,_.addressFlag=!0,_);const f={lat:1.276473557498751,lng:103.79921450710519},b=initMap(f),m=new google.maps.Marker({position:f,draggable:!0,map:b}),M=new google.maps.Geocoder;let I,V,C,T=new google.maps.places.PlacesService(b);google.maps.event.addListener(m,"dragend",function(Z){var A=Z.latLng;I=A.lat(),V=A.lng(),setTimeout(()=>{b.setCenter(new google.maps.LatLng(I,V)),b.setZoom(16)},100),M.geocode({latLng:A},function(v,g){g==google.maps.GeocoderStatus.OK&&(C=v[0].formatted_address,J(H,_.address=C,_),J(H,_.placePointer=0,_))});let c={location:A,radius:500};T.nearbySearch(c,S)})});const E=()=>{o=0;let f=[],b=[];if(e.length)for(var m=0;m<e[p].length;m++)U.includes(e[p][m])?f.push(e[p][m]):e[p][m]!==" "?(b.push(m),f.push("_")):f.push(" ");a=b,s(0,l=f)},K=["airport","amusement_park","aquarium","bar","bus_station","cafe","department_store","fire_station","hospital","park","restaurant","school","shopping_mall","tourist_attraction","train_station","transit_station","university","zoo","point_of_interest","establishment"],U=["R","S","T","L","N","E"];let p=0;const S=(f,b)=>{if(s(3,e=[]),b==google.maps.places.PlacesServiceStatus.OK){let I=f.filter(V=>K.some(C=>V.types.includes(C)));I=I.filter(V=>/^[A-Za-z\s]*$/.test(V.name));for(var m=0;m<I.length;m++){var M=I[m];e.push(M.name.toUpperCase())}}E()};De(()=>{J(H,_.addressFlag=!1,_)});const G=()=>async({result:f})=>{f.type==="success"&&await pe(),await ge(f)};return n.$$.update=()=>{n.$$.dirty&1&&s(6,r=!l.includes("_"))},s(0,l=[]),s(1,R={}),s(3,e=[]),a=[],o=0,s(5,w=0),s(4,h=0),[l,R,p,e,h,w,r,O,j,U,G]}class Ce extends be{constructor(t){super(),me(this,t,Ne,Le,ve,{})}}export{Ce as default};
